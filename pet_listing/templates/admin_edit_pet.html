<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<div class="modal fade" id="updatePetModal" tabindex="-1" role="dialog" aria-labelledby="updatePetModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updatePetModalLabel">Update Pet</h5>
            </div>
            <div class="modal-body">
                <form action="{% url 'admin_edit_pet' pet.id %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- Pet Name -->
                    <div class="form-group">
                        <label for="pet_name">Pet Name</label>
                        <input type="text" name="name" class="form-control" id="pet_name" value="{{ pet.name }}" required>
                    </div>

                    <!-- Age -->
                    <div class="form-group">
                        <label for="pet_age">Age (Months or Years)</label>
                        <input type="number" name="age" class="form-control" id="pet_age" value="{{ pet.age }}" min="0" required>
                    </div>

                    <!-- Gender -->
                    <div class="form-group">
                        <label for="pet_gender">Gender</label>
                        <select name="gender" class="form-control" id="pet_gender" required>
                            <option value="">Select Gender</option>
                            <option value="male" {% if pet.gender == 'male' %} selected {% endif %}>Male</option>
                            <option value="female" {% if pet.gender == 'female' %} selected {% endif %}>Female</option>
                        </select>                        
                    </div>

                    <!-- Breed -->
                    <div class="form-group">
                        <label for="pet_breed">Breed</label>
                        <input type="text" name="breed" class="form-control" id="pet_breed" value="{{ pet.breed }}" required>
                    </div>

                    <!-- Type of Species  -->
                    <div class="form-group">
                        <label for="pet_type">Type of Species</label>
                        <select name="pet_type" class="form-control" id="pet_type" required>
                            <option value="">Select Species</option>
                            <option value="Dog" {% if pet.pet_type == 'dog' %} selected {% endif %}>Dog</option>
                            <option value="Cat" {% if pet.pet_type == 'cat' %} selected {% endif %}>Cat</option>
                            <option value="Bird" {% if pet.pet_type == 'bird' %} selected {% endif %}>Bird</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea name="description" class="form-control" id="description" rows="3">{{ pet.description }}</textarea>
                    </div>

                    <!-- Adoption Fee -->
                    <div class="form-group">
                        <label for="adoption_fee">Adoption Fee (â‚±)</label>
                        <input type="number" name="adoption_fee" class="form-control" id="adoption_fee" value="{{ pet.adoption_fee }}" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label for="is_available">Is Available</label>
                        <input type="checkbox" name="is_available" class="form-control" id="is_available" {% if pet.is_available %} checked {% endif %}>
                    </div>

                    <div class="form-group">
                        <label for="time_in_shelter">Time in Shelter</label>
                        <input type="date" name="time_in_shelter" class="form-control" id="time_in_shelter" value="{{ pet.time_in_shelter|date:'Y-m-d' }}" required>
                    </div>
                    

                    <!-- Images Upload -->
                    {{ images_formset.management_form }}
                    {% for form in images_formset %}
                        <div class="form-group">
                            {{ form.image.label_tag }} {{ form.image }}
                            {% if form.instance.image %}
                                <img src="{{ form.instance.image.url }}" alt="{{ pet.name }}" class="img-thumbnail" width="100">
                            {% endif %}
                        </div>
                    {% endfor %}

                    <!-- Modal Actions -->
                    <div class="modal-footer">
                        <a href="{% url 'admin_pet_list' %}" class="btn btn-secondary">Cancel</a>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
